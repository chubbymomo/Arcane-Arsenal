{% extends "base.html" %}

{% block title %}Entities - Arcane Arsenal{% endblock %}

{% block content %}
<div style="margin-bottom: 1.5rem;">
    <a href="{{ url_for('host.index') }}" style="color: var(--accent); text-decoration: none;">‚Üê Back to Dashboard</a>
</div>

<div class="card" x-data="{ showCreateForm: false }">
    <h2>üìú All Entities</h2>

    <div class="action-section" style="margin-top: 2rem;">
        <button class="btn" @click="showCreateForm = !showCreateForm">+ Create Entity</button>

        <div x-show="showCreateForm" x-transition class="card" style="margin-top: 1rem;">
            <h3>Create New Entity</h3>
            <form method="POST" action="{{ url_for('host.create_entity') }}">
                <div style="margin-bottom: 1rem;">
                    <label for="name">Entity Name</label>
                    <input type="text" id="name" name="name" required placeholder="Enter entity name">
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn">Create</button>
                    <button type="button" class="btn btn-secondary" @click="showCreateForm = false">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div class="entity-list" style="margin-top: 2rem;">
        {% if entities %}
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>ID</th>
                        <th>Components</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in entities %}
                    <tr>
                        <td>
                            <a href="{{ url_for('host.entity_detail', entity_id=item.entity.id) }}" style="color: var(--primary); text-decoration: none;">
                                {{ item.entity.name }}
                            </a>
                        </td>
                        <td><code>{{ item.entity.id }}</code></td>
                        <td>
                            {% for comp in item.components %}
                                <span style="display: inline-block; background: rgba(212, 175, 55, 0.2); color: var(--primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; margin-right: 0.25rem;">{{ comp }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p style="color: var(--text-muted); text-align: center; padding: 2rem;">No entities found. Create your first entity above!</p>
        {% endif %}
    </div>
</div>
{% endblock %}
